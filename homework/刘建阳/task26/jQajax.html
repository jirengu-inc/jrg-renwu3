<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		li{
			list-style: none;
			margin: 5px;
			height: 30px;
			line-height: 30px;
			padding-left: 10px;
		}
		li:hover{
			cursor: pointer;
			background-color: green;
		}
		button{
			display: block;
			margin: 0 auto;
			height: 30px;

		}

	</style>
</head>
<body>
	<ul id="ct">
		<li>内容1</li>
		<li>内容2</li>
	</ul>
	<button id="load-more">加载更多</button>


	<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
	<script>
		/*接口：/getmore
		  type:get
		  dataType:json
		  传参: data{start:2,len:6}
		  回参: {
				status:1//成功,0//失败
				data[内容3,3,5、6、7、8]
		  }
		`success:handler//成功后处理
		 error：  //失败
		 */
		var cur=2;
		var lock=false;

		$('#load-more').on('click',function () {
			if (lock) {
				return ;
			};//设置状态锁，加载完成后才可点击
			lock = true;

			$.ajax({
			url: '/getmore',
			type: 'get',
			dataType: 'json',
			data: {
				start: cur,
				len: 6
			},
			success: function (json) {
				onSuccess(json);
				lock = false;
				
			},
			error: function () {
				function onError(){
					lock = false;
					alert("服务器出现错误!");
				}
				
			}
		});
		})

		
		function onSuccess(json){
			if(json.status === 1){
			  for (var i = 0; i < json.data.length; i++) {
			  	$('#ct').append('<li>' + json.data[i] + '</li>');
			  };
			  cur += 6;
			}else{
			  alert('获取数据失败');
			}
		}
	</script>
</body>
</html>