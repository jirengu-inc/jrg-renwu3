<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>task-25-3</title>
    <style media="screen">
    html,body,ul,li,a{
      margin: 0;
      padding: 0;
      text-decoration: none;
      list-style: none;
    }
    .clearfix:after{
      content: '';
      display: block;
      clear: both;
    }
    li{
      border: 1px solid #ccc;
    }
    .ct{
      width: 780px;
      margin: 0 auto;
    }
    .jew-list{
      width: 690px;
      margin-top: -10px;
    }
    .jew-list li{
      box-sizing: border-box;
      width: 220px;
      height: 220px;
      margin: 10px 10px 0 0;
      font-size: 16px;
      float: left;
    }
    .jew-list li img{
      display: block;
      margin: 0 auto;
    }
    .cover{
      border: 1px solid #ccc;
      height: 220px;
      position: relative;
      top: -100%;
      background-color:rgba(0, 0, 0, 0.3);;
      z-index: 3;
      animation: 1.5s;
    }

    .buy-now{
      display: flex;
      height: 220px;
    }
    .buy-now span{
      display: flex;
      padding: 5px 10px;
      height: 40px;
      line-height: 40px;
      margin:auto;
      border: 1px solid black;
      border-radius: 5px;
      background-color: white;
      color: red;
    }
    .show{
      display: block;
    }
    .hide{
      display: none;
    }
    #btn{
      width: 80px;
      font-size: 20px;
      line-height: 1.5;
    }
    </style>
    <script src="http://cdn.bootcss.com/jquery/3.1.1/jquery.min.js" charset="utf-8"></script>
  </head>
  <body>
    <div class="ct">
      <h1>珠宝首饰</h1>
      <ul class="jew-list clearfix">
        <li>
          <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="银的" />
          <p>
            银的银的银的银的银的银的银的
          </p>
          <span>￥699.00</span>
          <div class="cover hide">
            <div class="buy-now">
              <span>现在购买</span>
            </div>
          </div>
        </li>
        <li>
          <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="银的" />
          <p>
            银的银的银的银的银的银的银的
          </p>
          <span>￥699.00</span>
          <div class="cover hide">
            <div class="buy-now">
              <span>现在购买</span>
            </div>
          </div>
        </li>
        <li>
          <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="银的" />
          <p>
            银的银的银的银的银的银的银的
          </p>
          <span>￥699.00</span>
          <div class="cover hide">
            <div class="buy-now">
              <span>现在购买</span>
            </div>
          </div>
        </li>
      </ul>
      <button id="btn" type="button" name="button">点我</button>
    </div>



    <script type="text/javascript">
    var products = [
  {
      img: 'http://img10.360buyimg.com/N3/jfs/t2242/92/1446546284/374195/9196ac66/56af0958N1a723458.jpg',
      name: '珂兰 黄金手 猴哥款',
      price: '￥405.00'
  },{
      img: 'http://img10.360buyimg.com/N3/jfs/t2242/92/1446546284/374195/9196ac66/56af0958N1a723458.jpg',
      name: '珂兰 黄金转运珠 猴哥款',
      price: '￥100.00'
  },{
      img: 'http://img10.360buyimg.com/N3/jfs/t2242/92/1446546284/374195/9196ac66/56af0958N1a723458.jpg',
      name: '珂兰 黄金手链 3D猴哥款',
      price: '￥45.00'
  }
];
//用对象 products 内容拼装 dom对象
function getProdHtml(prod){
	var html = '';//建立空字符串
	html += '<li>'//拼接
	html +=    '<img src="'+prod.img+'" alt="">'
	html +=    '<p>'+prod.name+'</p>'
	html +=    '<span>'+prod.price+'</span>'
  html +=    '<div class="cover hide">'
  html +=      '<div class="buy-now">'
  html +=       '<span>现在购买</span>'
  html +=       '</div>'
  html +=     '</div>'
	html += '</li>'
	return html //拼接完毕
}
$('#btn').on('click', function(e){
  e.preventDefault();
  $.each(products, function(idx, prod){
  var html = getProdHtml(prod)
  $('.jew-list').append(html)
  hover()//!!!!!注意,jQuery 对象的内容并不随着DOM结构的改变而更新
          //所以每改变一次DOM,都要再执行一次hover() 
})
})



function hover() {
  $(".jew-list li").on("mouseenter",function () {
    var $this = $(this)
    $this.children('.cover').removeClass('hide')
  })
  $(".jew-list li").on("mouseleave",function () {
    var $this = $(this)
    $this.children('.cover').addClass('hide')
  })
}
hover()

    </script>
  </body>
</html>
