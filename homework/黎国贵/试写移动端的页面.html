<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content=" initial-scale=1, user-scalable=0, minimal-ui">
    <title>第一次试写移动端的页面</title>
    <style>
        html,body{
            width: 100%;
        }
        html,body,ul,li{
            margin: 0;
            padding: 0;
        }
        html{
            font-size:1px;
        }
        body{
            background-color: #eee;
        }
        li{
            list-style: none;
        }
        a{
            text-decoration: none;
        }
        .clear:after{
            content:"";
            display: block;
            clear:both;
        }
        /*导航栏*/
        nav{
            background-color: #fff;
        }
        nav ul{
            width:100%
        }
        nav ul li{
            float:left;
            width:20%;
            font-size: 30rem;
            text-align:center;
            border-top:1px solid #ccc;
            border-bottom:1px solid #ccc;
        }
        nav ul li a{
            color:#000;
        }
        /*标题栏*/
        .caption{
            margin-top:5px;
            background-color: #fff;
        }
        .caption .title1{
            float: left;
            padding-left: 5px;
            font-size: 15rem;
        }
        .caption .title1 a{
            color:#ff8800;
        }
        .caption .title2{
            float: right;
            padding-right: 5px;
            font-size: 15rem;
        }
        .caption .title2 a{
            color:#ff8800;
        }
        /*四叶区*/
        .hot-show{
            background-color: #fff;
        }
        .hot-show-li{
            float: left;
            box-sizing: border-box;
            width: 50%;
            padding-left: 5px;
            padding-right: 5px;
        }
        .hot-show-li img{
            width: 100%;
            height: 120px;
            background-color: #fff;
            border-radius:3px;
        }
        .hot-show-li div{
            width: 100%;
            height: 30px;
            text-align: center;
            font-size: 15rem;
        }
        /*文字图标*/
        .cell{
            margin-top: 5px;
            background-color: #fff;
        }
        .cell-li{
            box-sizing: border-box;
            width: 20%;
            padding-left: 15px;
            padding-right: 15px;
            float:left;
        }
        .cell-li .font-logo{
            display: block;
            width: 100%;
            height: 50px;
            border-radius: 10px;
            text-align: center;
            line-height:50px;
            color:#fff;
            font-size: 15rem;
        }
        .cell-li div{
            text-align: center;
            font-size: 10rem;
        }
        .orange{
            background-color: #ff8800;
        }
        .blue{
            background-color: deepskyblue;
        }
        .pink{
            background-color: deeppink;
        }
        .green{
            background-color: green;
        }
        .purple{
            background-color: purple;
        }
        /*footer区*/
        .end{
            margin-top: 20px;
        }
        .end li{
            width: 50%;
            float: left;
            text-align: center;
            font-size: 15rem;
        }
        .end li a{
            color:#000;
        }
        /*轮播区*/
        .carousel{
            position: relative;
            overflow: hidden;
            /*宽度和a标签的宽度或者和img的宽度相同，反正就是和图片相同就可以了*/
            width: 100%;
            height: 300px;
            background-color: #eeeeee;
        }
        .carousel .ct{
            position:absolute;
        }
        .carousel .ct li{
            position:relative;
            float: left;
        }
        .carousel .ct a{
            display: block;
            /*width: 414px;*/
            height: 300px;
            background: url("th.jpg") no-repeat;
            background-size: cover;
        }
        .carousel .bullet{
            position:absolute;
            bottom:10px;
            left: 50%;
            /*transform:translateX(-50%);*/
            margin-left: -40px;
        }
        .carousel .bullet li{
            width: 10px;
            height: 10px;
            float:left;
            background-color: #fff;
            cursor: pointer;
            border-radius: 50%;
            margin-left: 5px;
            margin-right: 5px;
        }
        .carousel .bullet li.active{
            background-color: deeppink;
        }
    </style>
</head>
<body>
<nav>
    <ul class="clear">
        <li><a href="#">首页</a></li>
        <li><a href="#">频道</a></li>
        <li><a href="#">直播</a></li>
        <li><a href="#">排行</a></li>
        <li><a href="#">我的</a></li>
    </ul>
</nav>
<header>
    <section>
        <div class="carousel">
            <ul class="ct clear">
                <li><a href="#"></a></li>
                <li><a href="#"></a></li>
                <li><a href="#"></a></li>
                <li><a href="#"></a></li>
            </ul>
            <ul class="bullet clear">
                <li class="active"></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </div>
    </section>
    <section class="cell">
        <ul class="clear">
            <li class="cell-li">
                <a class='font-logo orange' href="#">html</a>
                <div>积分乐园</div>
                <a href="#"></a>
            </li>
            <li class="cell-li">
                <a class='font-logo pink' href="#">html</a>
                <div>积分乐园</div>
                <a href="#"></a>
            </li>
            <li class="cell-li">
                <a class='font-logo purple' href="#">html</a>
                <div>积分乐园</div>
                <a href="#"></a>
            </li>
            <li class="cell-li">
                <a class='font-logo blue' href="#">html</a>
                <div>积分乐园</div>
                <a href="#"></a>
            </li>
            <li class="cell-li">
                <a class='font-logo green' href="#">html</a>
                <div>积分乐园</div>
                <a href="#"></a>
            </li>
        </ul>
    </section>
</header>
<main>
    <section class="hot-resume">
        <div class="caption clear">
            <div class="title1"><a href="#">热门推荐</a></div>
            <div class="title2"><a href="#">排行榜</a></div>
        </div>
        <ul class="hot-show clear">
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
        </ul>
    </section>
    <section class="hot-resume">
        <div class="caption clear">
            <div class="title1"><a href="#">正在直播</a></div>
            <div class="title2"><a href="#">查看更多直播</a></div>
        </div>
        <ul class="hot-show clear">
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
        </ul>
    </section>
    <section class="hot-resume">
        <div class="caption clear">
            <div class="title1"><a href="#">动画区</a></div>
            <div class="title2"><a href="#">查看更多更新</a></div>
        </div>
        <ul class="hot-show clear">
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
        </ul>
    </section>
    <section class="hot-resume">
        <div class="caption clear">
            <div class="title1"><a href="#">音乐区</a></div>
            <div class="title2"><a href="#">查看更多更新</a></div>
        </div>
        <ul class="hot-show clear">
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
            <li class="hot-show-li">
                <img src="th.jpg" alt="" class="pic1">
                <div>丢你雷姆</div>
                <a href="#"></a>
            </li>
        </ul>
    </section>
</main>
<footer>
    <section class="end">
        <ul class="clear">
            <li><a href="http://book.jirengu.com/jirengu-inc/jrg-renwu3/homework/%E9%BB%8E%E5%9B%BD%E8%B4%B5/resume/index.html">电脑版</a></li>
            <li><a href="#">返回顶部</a></li>
        </ul>
    </section>
</footer>
<script src="http://book.jirengu.com/jirengu-inc/jrg-renwu3/homework/%E9%BB%8E%E5%9B%BD%E8%B4%B5/music/jquery-2.2.3.min.js"></script>
<script>
    function Carousel($node){
        this.aLong();
        this.ct = $node.find(".ct") ;
        this.$children = this.ct.children("li");
        this.prev = this.ct.siblings(".prev");
        this.next = this.ct.siblings(".next");
        this.bullet = this.ct.siblings(".bullet");
        this.length = this.$children.size();//克隆前图片的数量
        this.imgWidth = this.ct.children("li").width();
        this.cur = 0;
        this.isAnimate =true;//全局变量状态锁，允许执行自动播放的功能
        this.ct.append(this.$children.first().clone());
        this.ct.prepend(this.$children.last().clone());
        this.imgRealCount = this.ct.children().size();//克隆后图片的数量
        this.ct.css({left:0-this.imgWidth,width:this.imgRealCount*this.imgWidth});
        console.log(this.ct.width());
        this.init();
    }
    Carousel.prototype = {
        aLong:function(){
            var winWidth = $(window).width();
            $('.carousel .ct a').css({
                width: winWidth
            });
        },
        init:function () {
            var me = this;
            me.bind();
            me.autoPlay();
        },
        bind : function () {
            var me = this;
            me.next.on("click",function (e) {
                e.preventDefault();
                me.stopAuto();
                me.playNext();
                me.autoPlay();
            });
            me.prev.on("click",function (e) {
                e.preventDefault();
                me.stopAuto();
                me.playPrev();
                me.autoPlay();
            });
            me.bullet.find("li").on("mouseenter",function () {
                var index = $(this).index();  //找出点击bullet的li元素的编号
                me.stopAuto();
                if (index>me.cur){
                    me.playNext(index-me.cur);
                }
                else if(index<me.cur){
                    me.playPrev(me.cur-index);
                }
                me.autoPlay();
            });
        },
        playNext: function (idx) {
            var me = this;
            var idx = idx || 1; //移动图片的数量
            if(me.isAnimate){
                me.isAnimate = false;
                me.ct.animate({     //让装载图片的火车，移动
                    left : "-=" +(me.imgWidth*idx)
                },function () {
                    me.cur = (me.cur + idx)%me.length;//改变编号 在四张图片的时候，例如：3+1=0
                    if(me.cur===0){//如果是第一号 虽然展示的是克隆体，但应该展示第一号，所以
                        me.ct.css({left:0-me.imgWidth});//瞬间移动为第一个,因为前面有一个克隆的，所以要减去一个imgWidth
                    }
                    me.isAnimate = true;
                    me.setBullet();
                })
            }
        },
        playPrev: function(idx) {
            var me = this;
            var idx = idx || 1; //移动图片数的数量
            if(me.isAnimate){
                me.isAnimate = false;
                me.ct.animate({     //让装载图片的火车，移动
                    left : "+=" +(me.imgWidth*idx)
                },function () {
                    me.cur = (me.length+me.cur-idx)%me.length;//改变编号 在四张图片的时候，例如：0-1=3
                    if(me.cur===me.length-1){//如果是最后一号 虽然展示的是克隆体，但应该展示最后一号，所以
                        me.ct.css({left:0-me.imgWidth*me.length});//瞬间移动为最后一个,因为前面有一个克隆的，所以要减去imgWidth*length
                    }
                    me.isAnimate = true;
                    me.setBullet();
                })
            }
        },
        setBullet:function () {//给相应bullet的li元素加上背景色
            var me =this;
            me.bullet.children().removeClass("active").eq(me.cur).addClass("active");
        },
        autoPlay:function  (){//自动播放
            var me = this;
            me.start = setInterval(function () {
                me.playNext();
            },2500)
        },
        stopAuto:function () {//停止自动播放功能
            var me =this;
            clearInterval(me.start);
        }
    };
    $('.carousel').each(function(){
        new Carousel($(this));
    });
</script>
</body>
</html>