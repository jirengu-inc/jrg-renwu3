<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .layout{
            margin: 0 auto;
            width: 1024px;
        }
        .item{
            /*border: 1px solid #ccc;*/
            border-radius: 5px;
            width: 33.33%;
            box-sizing: border-box;
            float: left;
            padding: 10px;
        }
        .item img{
            max-width: 100%;
            vertical-align: top;
        }
        .borer {
            border: 1px solid #ccc;
            padding: 5px;
            border-radius: 5px;
        }
        .clear:after{
            content: '';
            display: block;
            clear: both;
        }
    </style>
</head>
<body>
<div class="layout">
    <div class="list">
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/golden.png" alt="">
            </div>
        </div>
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/escape.png" alt="">
            </div>
        </div>

        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/dreams.png" alt="">
            </div>
        </div>


        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/golden.png" alt="">
            </div>
        </div>
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/escape.png" alt="">
            </div>
        </div>

        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/dreams.png" alt="">
            </div>
        </div>



        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/golden.png" alt="">
            </div>
        </div>
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/escape.png" alt="">
            </div>
        </div>

        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/dreams.png" alt="">
            </div>
        </div>



        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/golden.png" alt="">
            </div>
        </div>
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/escape.png" alt="">
            </div>
        </div>

        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/dreams.png" alt="">
            </div>
        </div>


        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/golden.png" alt="">
            </div>
        </div>
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/escape.png" alt="">
            </div>
        </div>

        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/dreams.png" alt="">
            </div>
        </div>


        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/golden.png" alt="">
            </div>
        </div>
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/escape.png" alt="">
            </div>
        </div>

        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/dreams.png" alt="">
            </div>
        </div>



        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/golden.png" alt="">
            </div>
        </div>
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/escape.png" alt="">
            </div>
        </div>

        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/dreams.png" alt="">
            </div>
        </div>



        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/golden.png" alt="">
            </div>
        </div>
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/escape.png" alt="">
            </div>
        </div>

        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/dreams.png" alt="">
            </div>
        </div>


        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/golden.png" alt="">
            </div>
        </div>
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/escape.png" alt="">
            </div>
        </div>

        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/dreams.png" alt="">
            </div>
        </div>


        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/golden.png" alt="">
            </div>
        </div>
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/escape.png" alt="">
            </div>
        </div>

        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/dreams.png" alt="">
            </div>
        </div>


        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/golden.png" alt="">
            </div>
        </div>
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/escape.png" alt="">
            </div>
        </div>

        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/dreams.png" alt="">
            </div>
        </div>


        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/golden.png" alt="">
            </div>
        </div>
        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/escape.png" alt="">
            </div>
        </div>

        <div class="item">
            <div class="borer">
                <img src='./img/loading.jpg' data-src="http://book.jirengu.com/jirengu-inc/jrg-tehui/homework/%E8%8B%A5%E6%84%9A/16/img/portfolio/dreams.png" alt="">
            </div>
        </div>
    </div>
    <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        var lazyLoad=(function () {
            function init() {
                seachImg()
                eventBind();
            }

            function eventBind() {
                var clock;
                $(window).on('scroll',function (e) {
                    //防止频繁滚动
                    if(clock){
                        clearTimeout(clock);
                    }
                    clock=setTimeout(function(){
                        seachImg();
                    },500);

                });
            }
            function seachImg() {
                $('.item img').each(function (i,e) {
                    if(isVisible($(e)) && !hasView(e)){
                        console.log(i,$(e).attr('data-src'))
                        showImg(e)
                    }
                });
            }
            function hasView(img) {
                return $(img).data('view');
            }
            function showImg(img) {
                var $img=$(img)
                $img.attr('src',$img.attr('data-src')).data('view',true);
            }
            function isVisible($node){
                var offset = $node.offset().top,
                        height = $(window).height(),
                        scroll = $(window).scrollTop();
                return  (height+scroll)>=offset;
            }


            function sleep(numberMillis) {
                var now = new Date();
                var exitTime = now.getTime() + numberMillis;
                while (true) {
                    now = new Date();
                    if (now.getTime() > exitTime)
                        return;
                }
            }
            return {action:init,sleep:sleep}
        }());
        lazyLoad.action(1000);
        //console.log('over')
    </script>

</div>
</body>
</html>