<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>task28-2</title>
    <style type="text/css">
    * {
        margin: 0;
        padding: 0;
    }
    
    .layout {
        width: 1000px;
        margin: 0 auto;
    }
    
    .header {
        height: 80px;
        background: red;
        text-align: center;
        line-height: 100px;
        margin-bottom: 20px;
    }
    
    .nav {
        height: 30px;
        background: yellow;
        border: 1px solid #484848;
    }
    
    .ct:after {
        content: '';
        display: block;
        clear: both;
        margin-bottom: 20px;
    }
    
    .asode {
        width: 200px;
        height: 400px;
        float: left;
        background: pink;
        margin-right: 20px;
    }
    
    .main {
        margin-left: 100px;
        overflow: hidden;
        height: 400px;
        background: blue;
        padding-left: 20px;
    }
    </style>
</head>

<body>
    <div class="layout">
        <div class="header">header</div>
        <div class="nav nav1">nav1</div>
        <div class='ct'>
            <div class="asode">asode</div>
            <div class="main">main</div>
        </div>
        <div class="nav nav2">nav2</div>
        <div class='ct'>
            <div class="asode">asode</div>
            <div class="main">main</div>
        </div>
        <div class="nav nav3">nav3</div>
        <div class='ct'>
            <div class="asode">asode</div>
            <div class="main">main</div>
        </div>
    </div>
    <script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.js"></script>
    <script type="text/javascript">
    $.fn.stickup = function(opts) {
        var $this = this,
            $width = $this.width(),
            $top = $this.offset().top,
            $div = $this.clone().css({
                opacity: 0,
                position: 'fixed',
                width: $width,
                top: 0,
                'z-index': 9999
            });
        $this.before($div);
        $(document).on('scroll', function() {
            var $offtop = $(document).scrollTop();
            if ($offtop >= $top) {
                if (!$div.attr('data-stick')) {
                    setstick();
                }
            } else {
                removestick();
            }
        });

        function setstick() {
            $this.css('opacity',0);
            $div.css({
                opacity: 1,
                backgroundColor: opts

            }).show();
            $div.attr('data-stick', 'true');
        }

        function removestick() {
            $this.css('opacity',1);
            $div.removeAttr('data-stick')
                .css('opacity', 0)
                .hide();
        }

    };
    $('.nav').each(function() {
        $(this).stickup();
    });
    </script>
</body>

</html>
