<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>task29-3</title>
    <style type="text/css">
    * {
        margin: 0;
        padding: 0;
    }
    
    .ct {
        width: 740px;
        margin: 0 auto;
        list-style: none;
    }
    
    .ct:after {
        content: "";
        display: block;
        clear: both;
    }
    
    .ct li {
        float: left;
        margin-left: 20px;
        margin-top: 20px;
    }
    
    .ct li img {
        width: 220px;
        height: 400px;
    }
    
    div {
        margin:30px auto;
        border: 1px solid red;
        width: 64px;
        padding: 10px;
    }
    </style>
</head>

<body>
    <ul class="ct">
        <li>
            <a href=""><img src="http://kejian.jirengu.com/data/fe/课件/32-懒加载/code/blank.jpg" data-src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/girl.jpg"></a>
        </li>
        <li>
            <a href=""><img src="http://kejian.jirengu.com/data/fe/课件/32-懒加载/code/blank.jpg" data-src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/girl.jpg"></a>
        </li>
        <li>
            <a href=""><img src="http://kejian.jirengu.com/data/fe/课件/32-懒加载/code/blank.jpg" data-src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/girl.jpg"></a>
        </li>
    </ul>
    <div>加载更多</div>
    <script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.js"></script>
    <script type="text/javascript">
    function imglazyload($el) {
        var clock;
        $(window).on('scroll', function() {
            if (clock) {
                clearTimeout(clock);
            }
            clock = setTimeout(function() {
                $each();
            }, 300);
        });
        $each();

        function $each() {
            $el.each(function() {
                var $node = $(this);
                if ($isShow($node)) {
                    if ($node.attr('inspect')) return;
                    $show($node);
                }
            });
        }

        function $isShow($el) {
            var $scrollT = $(window).scrollTop(),
                $winH = $(window).height(),
                $top = $el.offset().top;
            if ($top < $scrollT + $winH) return true;
            else return false;
        }

        function $show($el) {
            $el.attr('src', $el.attr('data-src'));
            $el.attr('inspect', true);
        }
    }
    imglazyload($('.ct img'));
    </script>
</body>

</html>
